{{user-preview user=comment.userId timestamp=comment.createdAt disabled=disabled}}

<!-- Comment -->
{{#unless inEditMode}}
  <div class="u-flex u-items-start u-justify-between">
    <p class="u-markdown-formatting u-mb0 u-pl2">{{markdown-to-html markdown=comment.properties.text extensions='targetBlankLinks sanitize'}}</p>
    {{#if (and canEdit (not inEditMode))}}
      {{fa-icon 'pencil' class='u-tc-tertiary u-hv-tc-secondary u-cursor-pointer u-fs2 u-pr2' click=(action 'enterEditMode')}}
    {{/if}}
  </div>
{{else}}
  <form class="u-mb3">
    {{validated-input
      errors=validations.attrs.text.messages
      type="textarea"
      value=text
      noMarkdown=true
      noLabel=true
    }}
    {{async-button
      class="c-btn c-btn-primary u-px2 u-py1 u-mr2"
      action=(action 'save')
      default="Save"
      pending="Saving..."
      disableWhen=(not validations.isValid)
    }}
    <button class="c-btn c-btn-text-secondary" {{action 'cancelEditMode'}}>Cancel</button>
  </form>
{{/unless}}

{{#if showCreateAccountModal}}
  {{! "container-class" is a temporary solution, changes in ember modal dialog required }}
    {{#repositive-modal
      container-class='c-modal--medium u-z5'
      close=(action 'toggleCreateAccountModal')
    }}
      {{repositive-modal/header
        image=comment.userId.profile.avatar
        title=(concat 'View ' comment.userId.firstname '\'s profile')
        onClose=(action 'toggleCreateAccountModal')
      }}
      {{#repositive-modal/content}}
        {{create-account-modal-content text='To see another user\'s profile, create an account.'}}
      {{/repositive-modal/content}}
    {{/repositive-modal}}
{{/if}}
