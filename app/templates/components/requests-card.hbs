<main class="col s12 m4 l4">
  <div class="card dataset card-comp">

    <header class="card-header">
      <div class="assay-container">
        <img src="/assets/images/icon-request-2.0.png">
        {{#if dataset.createdAt}}<p>{{moment-from-now dataset.createdAt hideSuffix=true}} ago</p>{{/if}}
      </div>
      <div class="actions-container valign-wrapper">
        {{action-favourite dataset=dataset}}
        <span class="grey-text">{{dataset.favourite}}</span>
        {{action-share
          actionableId=dataset.id
          actionableType='dataset'
          shareUrl=datasetUrl
        }}
      </div>
    </header>

    <div class="card-body">
      <header class="card-user">
        <img src={{dataset.userId.userProfile.avatar}}>
        <h6>
          {{#if dataset.userId.displayName}}
            {{#link-to 'user' dataset.userId.id}}{{dataset.userId.displayName}}{{/link-to}}
          {{else}}
            A Repositive user
          {{/if}}
          <br>
          <span>Is looking for data</span>
        </h6>
      </header>

      {{#if dataset.highlights.title}}
        {{#link-to 'requests.detail' dataset.id classNames="data-title"}}
        <div data-balloon={{dataset.title}} data-balloon-pos="up" data-balloon-length="large">
          <h4 class="data-title">{{{dataset.highlights.title}}}</h4>
        </div>
        {{/link-to}}
      {{else}}
        {{#link-to 'requests.detail' dataset.id classNames="data-title"}}
        <div data-balloon={{dataset.title}} data-balloon-pos="up" data-balloon-length="large">
          <h4 class="data-title">{{dataset.title}}</h4>
        </div>
        {{/link-to}}
      {{/if}}

      <div class="line-limit-desc">
        <div class="ellipsis">
          <p class="sub-grey">
            {{#if dataset.highlights.description}}
              {{{dataset.highlights.description}}}
            {{else}}
              {{dataset.description}}
            {{/if}}
          </p>
        </div>
      </div>

    </div>

    {{card-footer model=dataset}}
  </div>
</main>
