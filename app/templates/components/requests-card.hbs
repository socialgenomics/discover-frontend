<main class="col s12 m4 l4">
  <div class="card dataset">

    <header class="card-header">
      <div class="assay-container">
        <div class="request">
          <img src="/assets/images/icon-request-2.0.png">
        </div>
      </div>
      <div class="actions-container valign-wrapper">
        {{action-favourite action="toggleModal" dataset=dataset}}
        <span class="grey-text">{{dataset.favourite}}</span>
        {{action-share action="toggleModal" dataset=dataset}}
      </div>
    </header>

    <div class="card-body">
      <img src="{{dataset.userId.avatar}}">
      <h6>
        {{#if dataset.userId.displayName}}
          <span>Requested by </span>
          {{#link-to 'user' dataset.user.id}}
            {{dataset.userId.displayName}}
          {{/link-to}}
        {{/if}}
      </h6>

      {{#if dataset.highlights.title}}
        {{#link-to 'requests.detail' dataset.id classNames="data-title"}}
        <div data-balloon={{dataset.title}} data-balloon-pos="up" data-balloon-length="large">
          <h4 class="data-title">{{{dataset.highlights.title}}}</h4>
        </div>
        {{/link-to}}
      {{else}}
        {{#link-to 'requests.detail' dataset.id classNames="data-title"}}
        <div data-balloon={{dataset.title}} data-balloon-pos="up" data-balloon-length="large">
          <h4 class="data-title">{{dataset.title}}</h4>
        </div>
        {{/link-to}}
      {{/if}}


      <div class="line-limit-desc">
        <div class="ellipsis">
          <p class="sub-grey">
            {{#if dataset.highlights.description}}
              {{{dataset.highlights.description}}}
            {{else}}
              {{dataset.description}}
            {{/if}}
          </p>
        </div>
      </div>

    </div>

    {{card-footer model=dataset}}
  </div>
</main>
