{{meta-panel
  addFilter=(action 'addFilter')
  removeFilter=(action 'removeFilter')
  model=model
  filters=model.aggs
  activeFilters=activeFilters
  isLoading=isLoading
  class="u-bc-i-cant-believe-its-not-white"
  isSearchPage=true
}}

<div class="grid-wrapper grid-wrapper-stepped">
  {{#if isLoading}}
    {{partial 'loading'}}
  {{else}}
   <div class="u-ta-right u-mb3">
      <label for="results">Datasets per Page: </label>
      <select onchange={{action "selectResults" value="target.value"}} id="results">
        {{#each resultsOptions as |results|}}
          <option value={{results}} selected={{eq resultsPerPage results}}>{{results}}</option>
        {{/each}}
      </select>
    </div>

    {{search-results-list results=model.datasets totalResults=model.meta.total}}

    {{#if (gt model.meta.total 0)}}
      {{pagination-bar
        totalPages=totalPages
        currentPageNumber=page
        nextPage=(action 'nextPage')
        previousPage=(action 'previousPage')
      }}
    {{/if}}
  {{/if}}
</div>
